<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZICO AI Chat</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(to bottom, #8fd3f4, #84fab0);
    display: flex;
    justify-content: center;
    padding-top: 50px;
  }
  #chat-container {
    width: 90%;
    max-width: 500px;
    background: #fff;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  #messages {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
    background: #f9f9f9;
  }
  .message {
    max-width: 80%;
    padding: 10px 15px;
    border-radius: 20px;
    word-wrap: break-word;
    font-size: 14px;
    line-height: 1.4;
    opacity: 0;
    animation: fadeIn 0.3s forwards;
  }
  .user { 
    align-self: flex-end;
    background: #4e9af1;
    color: white;
    border-bottom-right-radius: 0;
  }
  .zico {
    align-self: flex-start;
    background: #22c55e;
    color: white;
    border-bottom-left-radius: 0;
    position: relative;
  }
  .loading-dots {
    display: inline-block;
  }
  .loading-dots span {
    display: inline-block;
    width: 6px;
    height: 6px;
    margin: 0 2px;
    background: white;
    border-radius: 50%;
    animation: blink 1s infinite;
  }
  .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
  .loading-dots span:nth-child(3) { animation-delay: 0.4s; }

  #input-container {
    display: flex;
    padding: 10px;
    background: #eee;
    gap: 5px;
  }
  #msg {
    flex: 1;
    padding: 10px;
    border-radius: 20px;
    border: 1px solid #ccc;
    font-size: 14px;
  }
  #send {
    padding: 10px 15px;
    border: none;
    border-radius: 20px;
    background: #4e9af1;
    color: white;
    cursor: pointer;
    font-weight: bold;
  }
  #send:disabled { background: #999; cursor: not-allowed; }

  @keyframes blink {
    0%, 80%, 100% { opacity: 0; }
    40% { opacity: 1; }
  }

  @keyframes fadeIn {
    to { opacity: 1; }
  }
</style>
</head>
<body>
<div id="chat-container">
  <div id="messages"></div>
  <div id="input-container">
    <input type="text" id="msg" placeholder="Ketik pesan..." />
    <button id="send">Kirim</button>
  </div>
</div>

<script>
const backendURL = "https://zico-ai-vercel.vercel.app/api/chat"; // Ganti sesuai URL backendmu
const messages = document.getElementById('messages');
const msgInput = document.getElementById('msg');
const sendBtn = document.getElementById('send');

function addMessage(text, sender, loading=false) {
  const div = document.createElement('div');
  div.className = `message ${sender}`;
  if(loading) {
    div.innerHTML = '<span class="loading-dots"><span></span><span></span><span></span></span>';
  } else {
    div.textContent = text;
  }
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
  return div;
}

async function sendMessage() {
  const msg = msgInput.value.trim();
  if (!msg) return;
  addMessage(msg, 'user');
  msgInput.value = '';
  sendBtn.disabled = true;
  const zicoMsg = addMessage('', 'zico', true);
  
  try {
    const res = await fetch(backendURL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: msg })
    });
    const data = await res.json();
    zicoMsg.innerHTML = data.reply;
  } catch (e) {
    zicoMsg.innerHTML = "ZICO lagi rame ðŸ˜µ coba kirim lagi bentar ya";
  }

  sendBtn.disabled = false;
}

sendBtn.addEventListener('click', sendMessage);
msgInput.addEventListener('keydown', e => { if(e.key === 'Enter') sendMessage(); });
</script>
</body>
</html>
